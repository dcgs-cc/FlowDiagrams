MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 
                      00002 ;
                      00003 ;       #define Use16F876A
                      00004         #define Use16F876
                      00005 ;        #define Use16F886
                      00006 
                      00007 
                      00008 
                      00009 #ifdef Use16F876A
                      00010         __CONFIG    _WDT_OFF  &  _XT_OSC & _DEBUG_OFF  & _BODEN_OFF  & _PWRTE_ON & _LVP_OFF & _CPD_OFF &
                             _CP_OFF  & _WRT_OFF  & _CP_OFF
                      00011         LIST   P=PIC16F876A     ; list directive to define processor
                      00012         #include <p16F876A.inc> ; processor specific variable definition
                      00013 endif
                      00014 
                      00015 #ifdef Use16F876
2007   3F31           00016         __CONFIG    _WDT_OFF  &  _XT_OSC & _DEBUG_OFF  & _BODEN_OFF  & _PWRTE_ON & _LVP_OFF & _CPD_OFF &
                             _CP_OFF  & _WRT_ENABLE_ON 
                      00017         LIST   P=PIC16F876      ; list directive to define processor
                      00018         #include <p16F876.inc>  ; processor specific variable definition
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F876 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00498         LIST
Warning[205]: Found directive in column 1. (endif)
                      00019 endif
                      00020 
                      00021 #ifdef Use16F886
                      00022         __CONFIG    2007, _WDT_OFF  &  _XT_OSC & _DEBUG_OFF  & _BOR_OFF & _PWRTE_ON & _LVP_OFF & _CPD_OF
                            F & _CP_OFF  &_EXTRC_OSC_CLKOUT
                      00023         __CONFIG    2008,   _WRT_OFF
                      00024         LIST   P=PIC16F886      ; list directive to define processor
                      00025         #include <p16F886.inc>  ; processor specific variable definition
                      00026 endif
                      00027 
                      00028 
                      00029 
                      00030 
                      00031 ;**********************************************************************
                      00032 ;VARIABLE DEFINITIONS - the data memory starts at 0x20
  00000020            00033 R0              equ     0x20    ;register use for OCR S0 etc
  00000021            00034 R1              equ     0x21
  00000022            00035 R2              equ     0x22
  00000023            00036 R3              equ     0x23
  00000024            00037 R4              equ     0x24            
  00000025            00038 R5              equ     0x25            
  00000026            00039 R6              equ     0x26            
  00000027            00040 R7              equ     0x27
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000028            00041 R8              equ     0x28            ;used for workspace for flow diagram stuff
  00000029            00042 R9              equ     0x29
  0000002A            00043 w_temp          equ     0x2a            ; variable used for context saving 
  0000002B            00044 status_temp     equ     0x2b            ; variable used for context saving
  0000002C            00045 temp1           equ     0x2c            ;following used for gen purpose in routines
  0000002D            00046 temp2           equ     0x2d
  0000002E            00047 A0              equ     0x2e            ;used for the os code aas workspace
  0000002F            00048 A1              equ     0x2f
  00000030            00049 A2              equ     0x30
  00000031            00050 A3              equ     0x31
  00000032            00051 A4              equ     0x32
  00000033            00052 A5              equ     0x33
  00000034            00053 w_Btemp         equ     0x34            ; variable used for context saving in break
  00000035            00054 status_Btemp    equ     0x35            ; variable used for context saving in break
  00000036            00055 next_free       equ     0x36            ;holds inital value of PORTA on reset...
                      00056 
                      00057 
  00000070            00058 ADDRL           equ     0x70            ;these registers in all banks
  00000071            00059 ADDRH           equ     0x71
  00000072            00060 DATAL           equ     0x72            ;these registers in all banks
  00000073            00061 DATAH           equ     0x73
  00000074            00062 INTCONX         equ     0x74            ;for status saving in memory read/writes
  00000075            00063 SerBuffPtr      equ     0x75            ;pointer to serial buffer
  00000076            00064 SerFlags        equ     0x76            ;bit 0 = buffer overrun; b1 = msg complete
                      00065 #ifdef Use16F876A
                      00066 DATAbuffer      equ     0x77            ;used for write buffer on 16f876A only
                      00067 endif
                      00068 
                      00069 
                      00070 
                      00071 
                      00072 ;using the file registers in bank 2 for serial received buffer starting at 0x10
  00000010            00073 SerialBuffer     equ     0x10   ;bank 2!!!  
                      00074                                 ; message for w is @@@@w0500 plus 64 chars so max of 0x49 chars    
                      00075 
                      00076 #ifdef Use16F886
                      00077 ;using ram in bank 2
                      00078 DATAbuffer      equ     0x10            ;used for write buffer on 16f886 only - I think it is safe to ov
                            erwrite the serial buffer?
                      00079 
                      00080 endif
                      00081 
                      00082 ;**********************************************************************
0000                  00083                 ORG     0x000           ; processor reset vector
0000   281F           00084                 goto    setup           ; go to beginning of program
0001   2A37           00085                 goto    break_point     ;vector for breakpoint
0002   0000           00086                 nop                     ;here for user jump later...
0004                  00087                 ORG     0x004           ; interrupt vector location
0004   00AA           00088                 movwf   w_temp          ; save off current W register contents
0005   0803           00089                 movf    STATUS,w        ; move status register into W register
0006   00AB           00090                 movwf   status_temp     ; save off contents of STATUS register
                      00091                                         ;int code goes here
                      00092                 
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0007   1303           00093                 bcf     STATUS, RP1 
0008   1283           00094                 bcf     STATUS, RP0     ;Bank 0
0009   1E8C           00095                 btfss   PIR1,RCIF
000A   281A           00096                 goto    Exit_Int        ;is us
                      00097 
000B   0875           00098                 movf    SerBuffPtr,W    ;store at next point in buffer
000C   0084           00099                 movwf   FSR
000D   1783           00100                 bsf     STATUS,7        ;irp bit so access bank 2
000E   081A           00101                 movf    RCREG,W
000F   0080           00102                 movwf   INDF
0010   3C0D           00103                 sublw   0x0d
0011   1903           00104                 btfsc   STATUS,Z        ;is msg complete??
0012   14F6           00105                 bsf     SerFlags,1
                      00106 
0013   0AF5           00107                 incf    SerBuffPtr,F    ;inc ptr
0014   306F           00108                 movlw   0x6f            ;top of buffer
0015   0275           00109                 subwf   SerBuffPtr,W
0016   1D03           00110                 btfss   STATUS,Z
0017   281A           00111                 goto    Exit_Int
0018   0375           00112                 decf    SerBuffPtr,W    ;so flag overrun and dec
0019   1476           00113                 bsf     SerFlags,0
                      00114 
001A                  00115 Exit_Int
001A   082B           00116                 movf    status_temp,w   ; retrieve copy of STATUS register
001B   0083           00117                 movwf   STATUS          ;restore pre-isr STATUS register contents
001C   0EAA           00118                 swapf   w_temp,f
001D   0E2A           00119                 swapf   w_temp,w        ; restore pre-isr W register contents
001E   0009           00120                 retfie
                      00121 
                      00122 ;**********************************************************************
                      00123 ;
                      00124 ;               setup
                      00125 ;
                      00126 
                      00127 ; PORTB as OUTPUT  PORT C as INPUTS except RC6 (TX) and RC7(Rx)
001F                  00128 setup
001F   1303           00129                 bcf     STATUS, RP1     ;
0020   1283           00130                 bcf     STATUS, RP0     ;Bank 0
0021   0187           00131                 clrf    PORTC
0022   0186           00132                 clrf    PORTB
0023   1707           00133                 bsf     PORTC,6         ;best to have serial tx hi at start
0024   1683           00134                 bsf     STATUS, RP0     ;bank1
0025   30BF           00135                 movlw   B'10111111'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0026   0087           00136                 movwf   TRISC
0027   3000           00137                 movlw   B'00000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0028   0086           00138                 movwf   TRISB
0029   30F7           00139                 movlw   B'11110111'     ;use RA4/5 as inputs also  RA3 for "ticker!"RA2 for pgm decision
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002A   0085           00140                 movwf   TRISA
                      00141 
                      00142 #ifdef Use16F886
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00143                 BANKSEL ANSEL
                      00144                 movlw   0x01
                      00145                 movwf   ANSEL           ;digital I/O except bit 0
                      00146                 BANKSEL ANSELH
                      00147                 CLRF    ANSELH
                      00148 
                      00149 endif
                      00150 
002B   1683 1303      00151                 BANKSEL ADCON1          ;seems to be same for 876 886
002D   300E           00152                 movlw   b'00001110'     ; set as ADRESH is left justified and use AN0 as analog intput w
                            ith int ref
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002E   009F           00153                 movwf   ADCON1          ;uses RA0 as the sole analogue input
                      00154 
                      00155 
002F   1283           00156                 bcf     STATUS, RP0     ;Bank 0
0030   20CC           00157                 call    SetupSerial
0031   2984           00158                 goto    main
                      00159 
                      00160 ;**************************************************************************
                      00161 ;
                      00162 ;               routines for OCR emulate
                      00163 ;
                      00164 ;
                      00165 
0032                  00166 READADC
                      00167 ;return result in R0
                      00168 
0032   1283 1303      00169                 banksel ADCON0
                      00170 #ifdef Use16F886
                      00171 
                      00172                 MOVLW   b'11000011' ;ADC Frc clock,
                      00173                 MOVWF   ADCON0 ;AN0, On
                      00174                 
                      00175                 btfsc   ADCON0,1
                      00176                 goto    $-1
                      00177                 movf    ADRESH,W        ;top 8 bits.....
                      00178                 movwf   R0
                      00179                 return
                      00180 else
0034   3005           00181                 movlw   b'00000101'     ;set go
0035   009F           00182                 movwf   ADCON0
0036   191F           00183                 btfsc   ADCON0,2
0037   2836           00184                 goto    $-1
0038   081E           00185                 movf    ADRESH,W        ;top 8 bits.....
0039   00A0           00186                 movwf   R0
003A   0008           00187                 return
Warning[205]: Found directive in column 1. (endif)
                      00188 endif
                      00189 
003B                  00190 READTABLE
                      00191 
003B   0827           00192                 movf    R7,W            ;R7 points to table low byte   0x400 for hi byte ;return in R0
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

003C   1703           00193                 bsf     STATUS, RP1
003D   1283           00194                 bcf     STATUS, RP0     ;Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
003E   008D           00195                 movwf   EEADR
003F   3004           00196                 movlw   0x04            ;table at 0x400
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0040   008F           00197                 movwf   EEADRH
0041   1683           00198                 bsf     STATUS, RP0     ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0042   178C           00199                 bsf     EECON1,EEPGD
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0043   140C           00200                 bsf     EECON1,RD
0044   0000           00201                 nop
0045   0000           00202                 nop
0046   1283           00203                 bcf     STATUS,RP0      ;bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0047   080C           00204                 movf    EEDATA,W
0048   1303           00205                 bcf     STATUS, RP1     ;bank 0
0049   00A0           00206                 movwf   R0
004A   1703           00207                 bsf     STATUS, RP1     ;bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
004B   080E           00208                 movf    EEDATH,W        ;hi 6 bits
004C   1303           00209                 bcf     STATUS, RP1     ;bank 0
004D   0008           00210                 return
                      00211 
                      00212 
004E                  00213 WAIT1MS
004E   3000           00214                 movlw   0
004F   00AC           00215                 movwf   temp1
0050   0BAC           00216                 decfsz  temp1,1
0051   2850           00217                 goto    $-1
0052   0008           00218                 return
                      00219 
0053                  00220 READDATAEEPROM
                      00221 ;               not really an OCR call but added for flexibility...
                      00222 ;               value returned in S0
                      00223 ;               address in S7
0053   0827           00224                 movf    R7,W
0054   00F0           00225                 movwf   ADDRL
0055   01F1           00226                 clrf    ADDRH
0056   206E           00227                 call    ReadEEProm
0057   00A0           00228                 movwf   R0
0058   0008           00229                 return
                      00230 
0059                  00231 WRITEDATAEEPROM
                      00232 ;               not really an OCR call but added for flexibility...
                      00233 ;               value in S0
                      00234 ;               address in S7
0059   0827           00235                 movf    R7,W
005A   00F0           00236                 movwf   ADDRL
005B   01F1           00237                 clrf    ADDRH
005C   0820           00238                 movf    R0,W
005D   00F2           00239                 movwf   DATAL
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

005E   288B           00240                 goto    writeEEProm
                      00241 
                      00242 
                      00243 
                      00244 ;**************************************************************************
                      00245 ;
                      00246 ;               memory reading/writing
                      00247 ;
                      00248 ;
                      00249 
005F                  00250 SetBank0_return
005F   1303           00251                 bcf     STATUS, RP1
0060   1283           00252                 bcf     STATUS, RP0     ;Bank 0
0061   0008           00253                 return
                      00254 
0062                  00255 ReadProgramMemory
                      00256 
0062   209F           00257                 call    SetUpMemAdd     ;returns in bank 2
0063   1683           00258                 bsf     STATUS, RP0     ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0064   178C           00259                 bsf     EECON1,EEPGD
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0065   140C           00260                 bsf     EECON1,RD
0066   0000           00261                 nop
0067   0000           00262                 nop
0068   1283           00263                 bcf     STATUS,RP0      ;bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0069   080C           00264                 movf    EEDATA,W
006A   00F2           00265                 movwf   DATAL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
006B   080E           00266                 movf    EEDATH,W        ;hi 6 bits
006C   00F3           00267                 movwf   DATAH
006D   285F           00268                 goto    SetBank0_return
                      00269 
006E                  00270 ReadEEProm
                      00271 ;returns value in W
                      00272 ;address ADDRL/ADDRH
006E   209F           00273                 call    SetUpMemAdd     ;returns in bank 2  note sets up EEADRH as well tho not needed
006F   1683           00274                 bsf     STATUS, RP0     ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0070   138C           00275                 bcf     EECON1, EEPGD   ;Point to Data memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0071   140C           00276                 bsf     EECON1, RD      ;Start read operation
0072   1283           00277                 bcf     STATUS, RP0     ;Bank 2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0073   080C           00278                 movf    EEDATA, W       ;W = EEDATA
0074   285F           00279                 goto    SetBank0_return
                      00280 
0075                  00281 WriteProgramMemory
                      00282 ;address ADDRL/ADDRH
                      00283 ;data in DATAl/DATAH
                      00284 
0075   209F           00285                 call    SetUpMemAdd     ;returns in bank 2
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0076   0872           00286                 movf    DATAL, W        ;Write value to
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0077   008C           00287                 movwf   EEDATA          ;program at
0078   0873           00288                 movf    DATAH, W        ;desired memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0079   008E           00289                 movwf   EEDATH          ;location
007A   1683           00290                 bsf     STATUS, RP0     ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
007B   178C           00291                 bsf     EECON1, EEPGD   ;Point to Program memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
007C   150C           00292                 bsf     EECON1, WREN    ;Enable writes
007D   080B           00293                 movf    INTCON,W
007E   00F4           00294                 movwf   INTCONX         ;save int state
007F   138B           00295                 bcf     INTCON, GIE     ;disable interrupts
0080   3055           00296                 movlw   0x55            ;Write 55h to EECON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0081   008D           00297                 movwf   EECON2
0082   30AA           00298                 movlw   0xAA            ;Write AAh to EECON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0083   008D           00299                 movwf   EECON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0084   148C           00300                 bsf     EECON1, WR      ;Start write operation
0085   0000           00301                 nop                     ;Two NOPs to allow micro
0086   0000           00302                 nop                     ;to setup for write
0087   0874           00303                 movf    INTCONX,W       ;restore int state
0088   008B           00304                 movwf   INTCON
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0089   110C           00305                 bcf     EECON1, WREN    ;Disable writes
008A   285F           00306                 goto    SetBank0_return
                      00307 
008B                  00308 writeEEProm
                      00309 ;address ADDRL
                      00310 ;data in DATAl
                      00311 
008B   209F           00312                 call    SetUpMemAdd     ;returns in bank 2
008C   0872           00313                 movf    DATAL, W        ;Data to
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
008D   008C           00314                 movwf   EEDATA          ;write
008E   1683           00315                 bsf     STATUS, RP0     ;Bank 3
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
008F   138C           00316                 bcf     EECON1, EEPGD   ;Point to Data memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0090   150C           00317                 bsf     EECON1, WREN    ;Enable writes
0091   138B           00318                 bcf     INTCON, GIE     ;disable int
0092   3055           00319                 movlw   0x55            ;Write 55h to
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0093   008D           00320                 movwf   EECON2          ;EECON  
0094   30AA           00321                 movlw   0xAA            ;Write AAh to   
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0095   008D           00322                 movwf   EECON2          ;EECON2
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0096   148C           00323                 bsf     EECON1, WR      ;Start write operation
0097   1683           00324                 bsf     STATUS, RP0     ;Bank 3
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0098   188C           00325                 btfsc   EECON1, WR      ;Wait for
0099   2898           00326                 goto    $-1             ;write to finish
009A   178B           00327                 bsf     INTCON, GIE     ;enable int     
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
009B   110C           00328                 bcf     EECON1, WREN    ;Disable writes
009C   285F           00329                 goto    SetBank0_return 
                      00330 
                      00331 
                      00332 
009D                  00333 WriteProgramMemory4     ;awful 4 word block write.... only used for 16F876A
                      00334 #ifdef Use16F876A
                      00335 ;address ADDRL/ADDRH
                      00336 ;8 bytes (4 words) of data stored at (DATAbuffer)
                      00337                 call    SetUpMemAdd     ;returns in bank 2
                      00338                 movlw   DATAbuffer      ;Load initial buffer address into the FSR
                      00339                 movwf   FSR ;
                      00340 loopWR4         movf    INDF,W          ;Load first data byte into lower
                      00341                 movwf   EEDATA 
                      00342                 incf    FSR,F           ;Next byte
                      00343                 movf    INDF,W          ;Load second data byte into upper
                      00344                 movwf   EEDATH
                      00345                 incf    FSR,F 
                      00346                 bsf     STATUS,RP0      ;Bank 3
                      00347                 bsf     EECON1,EEPGD    ;Point to program memory
                      00348                 bsf     EECON1,WREN     ;Enable writes
                      00349                 bcf     INTCON,GIE      ;Disable interrupts (if using)
                      00350                 movlw   0x55            ;Write 55h to EECON2
                      00351                 movwf   EECON2
                      00352                 movlw   0xAA            ;Write AAh to EECON2
                      00353                 movwf   EECON2
                      00354                 bsf     EECON1, WR      ;Start write operation
                      00355 ; Any instructions here are ignored as processor
                      00356 ; halts to begin write sequence
                      00357                 nop
                      00358                 nop
                      00359 ; processor will stop here and wait for write complete
                      00360 ; after write processor continues with 3rd instruction
                      00361 
                      00362                 bcf     EECON1,WREN     ;Disable writes
                      00363                 bsf     INTCON,GIE      ;Enable interrupts (if using)
                      00364                 bcf     STATUS,RP0      ;Bank 2
                      00365                 incf    EEADR,F         ;Increment address
                      00366                 movf    EEADR,W         ;Check if lower two bits of address are ‘00’
                      00367                 andlw   0x03            ;Indicates when four words have been programmed
                      00368                 ;xorlw  0x03 
                      00369                 btfss   STATUS,Z        ;Exit if more than four words,
                      00370                 goto    loopWR4         ;Continue if less than four words
                      00371                 bcf     STATUS, RP1
                      00372                 bcf     STATUS, RP0     ;Bank 0
                      00373 
                      00374 endif
                      00375 
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

009D   0008           00376                 return
                      00377 
009E                  00378 WriteProgramMemory8     ;awful 8 word block write.... only used for 16F886
                      00379 #ifdef Use16F886
                      00380 ;address ADDRL/ADDRH
                      00381 ;16 bytes (8 words) of data stored at (DATAbuffer)
                      00382 
                      00383                 movlw   SerialBuffer+9          ;buffer points to data
                      00384                 movwf   SerBuffPtr
                      00385                 call    SetUpMemAdd     ;returns in bank 2
                      00386 
                      00387 loopWR8
                      00388                 call    GetDataWord     ;data word in DATAH/L  ... returns in bank2
                      00389                 movf    DATAL,W         ;Load first data byte into lower
                      00390                 movwf   EEDATA 
                      00391                 movf    DATAH,W         ;Load second data byte into upper
                      00392                 movwf   EEDATH
                      00393 
                      00394                 bsf     STATUS,RP0      ;Bank 3
                      00395                 bsf     EECON1,EEPGD    ;Point to program memory
                      00396                 bsf     EECON1,WREN     ;Enable writes
                      00397                 bcf     INTCON,GIE      ;Disable interrupts (if using)
                      00398                 btfsc   INTCON,GIE ; See AN576
                      00399                 goto     $-2
                      00400                 movlw   0x55            ;Write 55h to EECON2
                      00401                 movwf   EECON2
                      00402                 movlw   0xAA            ;Write AAh to EECON2
                      00403                 movwf   EECON2
                      00404                 bsf     EECON1, WR      ;Start write operation
                      00405 ; Any instructions here are ignored as processor
                      00406 ; halts to begin write sequence
                      00407                 nop
                      00408                 nop
                      00409 ; processor will stop here and wait for write complete
                      00410 ; after write processor continues with 3rd instruction
                      00411 
                      00412                 bcf     EECON1,WREN     ;Disable writes
                      00413                 bsf     INTCON,GIE      ;Enable interrupts (if using)
                      00414                 bcf     STATUS,RP0      ;Bank 2
                      00415                 incf    EEADR,F         ;Increment address
                      00416                 movf    EEADR,W         ;Check if lower three bits of address are ‘00’
                      00417                 andlw   0x0F            ;Indicates when 16 words have been programmed
                      00418 
                      00419                 btfss   STATUS,Z        ;Exit if more than 16 words,
                      00420                 goto    loopWR8         ;Continue 
                      00421                 bcf     STATUS, RP1
                      00422                 bcf     STATUS, RP0     ;Bank 0
                      00423 
                      00424 endif
Warning[203]: Found opcode in column 1. (return)
009E   0008           00425 return
                      00426 
009F                  00427 SetUpMemAdd
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

009F   1703           00428                 bsf     STATUS, RP1 
00A0   1283           00429                 bcf     STATUS, RP0     ;Bank 2
00A1   0870           00430                 movf    ADDRL, W        ;Write address
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A2   008D           00431                 movwf   EEADR           ;of desired
00A3   0871           00432                 movf    ADDRH, W        ;program memory
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A4   008F           00433                 movwf   EEADRH          ;location
00A5   0008           00434                 return
                      00435 
                      00436 
                      00437 ;**********************************************************************
                      00438 ;about 325 ms at 4MHz
00A6                  00439 delay_checkSerial
00A6   30F0           00440                 movlw   0xf0
00A7   00AF           00441                 movwf   A1
00A8   00AE           00442 delay0          movwf   A0
00A9   0BAE           00443 delay1          decfsz  A0,F
00AA   28A9           00444                 goto    delay1
00AB   18F6           00445                 btfsc   SerFlags,1
00AC   0008           00446                 return
00AD   0BAF           00447                 decfsz  A1,F
00AE   28A8           00448                 goto    delay0
00AF   0008           00449                 return
                      00450 
                      00451 
00B0                  00452 ConvertHexToNumber
                      00453 ;ascii hex symbol in W, returns number in W
                      00454 ;uses A0
                      00455 ;first is it >0x40
00B0   00AE           00456                 movwf   A0
00B1   3040           00457                 movlw   0x40
00B2   022E           00458                 subwf   A0,W
00B3   3030           00459                 movlw   0x30    ;doesn't affect C
                      00460 ;if c=1 then A0>W
00B4   1803           00461                 btfsc   STATUS,C
00B5   3E07           00462                 addlw   0x07
00B6   022E           00463                 subwf   A0,W    ;now a number 
00B7   0008           00464                 return
                      00465 
00B8                  00466 ConvertNumberToHex
                      00467 ;number in W,   returns ascii codes in A0(hi byte),A1(low byte)
00B8   00AF           00468                 movwf   A1
00B9   39F0           00469                 andlw   0xf0    ;top nibble
00BA   00AE           00470                 movwf   A0
00BB   0EAE           00471                 swapf   A0,F    ;now lower nibble in A0
00BC   300A           00472                 movlw   0x0A
00BD   022E           00473                 subwf   A0,W    ;c=1 if A0>W
00BE   3030           00474                 movlw   0x30    ;c unaffected
00BF   1803           00475                 btfsc   STATUS,C
00C0   3E07           00476                 addlw   0x07
00C1   07AE           00477                 addwf   A0,F    ;A0 has ascii code
                      00478                 
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00C2   082F           00479                 movf    A1,W
00C3   390F           00480                 andlw   0x0f    ;lower nibble
00C4   00AF           00481                 movwf   A1
00C5   300A           00482                 movlw   0x0A
00C6   022F           00483                 subwf   A1,W    ;c=1 if A1>W
00C7   3030           00484                 movlw   0x30    ;c unaffected
00C8   1803           00485                 btfsc   STATUS,C
00C9   3E07           00486                 addlw   0x07
00CA   07AF           00487                 addwf   A1,F    ;A0 has ascii code
00CB   0008           00488                 return
                      00489 
                      00490 ;**********************************************************************
                      00491 ;
                      00492 ;               Serial routines
                      00493 ;
                      00494 ;
                      00495 
00CC                  00496 SetupSerial
00CC   3010           00497                 movlw   SerialBuffer
00CD   00F5           00498                 movwf   SerBuffPtr
00CE   1683           00499                 bsf     STATUS, RP0     ;Bank 1
00CF   3024           00500                 MOVLW   b'00100100'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D0   0098           00501                 MOVWF   TXSTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D1   168C           00502                 bsf     PIE1,RCIE       ;enable ints for receive
00D2   3019           00503                 movlw   0x19            ;9600 baud
                      00504                 ;movlw  0x0C            ;19.2kbaud
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D3   0099           00505                 movwf   SPBRG           ;should be 9.6kbaud at 4MHz  (also in bank 1)
00D4   1283           00506                 bcf     STATUS, RP0     ;Bank 0
00D5   3090           00507                 movlw   B'10010000'
00D6   0098           00508                 movwf   RCSTA
00D7   178B           00509                 bsf     INTCON,GIE      ;going to enable int
00D8   170B           00510                 bsf     INTCON,PEIE
00D9   01F6           00511                 clrf    SerFlags
00DA   0008           00512                 return
                      00513 
                      00514 
00DB                  00515 SendMessage
                      00516                                         ;address ADDRL/ADDRH
00DB   2062           00517                 call    ReadProgramMemory
00DC   0872           00518                 movf    DATAL,W         ;data is packed as 7 bit ascii in DATAL/DATAH
00DD   00A2           00519                 movwf   R2
00DE   13A2           00520                 bcf     R2,7
00DF   0DF2           00521                 rlf     DATAL,F
00E0   0DF3           00522                 rlf     DATAH,F
00E1   0873           00523                 movf    DATAH,W
00E2   1E0C           00524                 btfss   PIR1,TXIF
00E3   28E2           00525                 goto    $-1
00E4   0099           00526                 movwf   TXREG
00E5   0822           00527                 movf    R2,W
00E6   1903           00528                 btfsc   STATUS,Z
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00E7   0008           00529                 return                  ;end on zero byte
00E8   1E0C           00530                 btfss   PIR1,TXIF
00E9   28E8           00531                 goto    $-1
00EA   0099           00532                 movwf   TXREG
00EB   0AF0           00533                 incf    ADDRL,F
00EC   0870           00534                 movf    ADDRL,W
00ED   1903           00535                 btfsc   STATUS,Z
00EE   0AF1           00536                 incf    ADDRH,F
00EF   28DB           00537                 goto    SendMessage
                      00538 
00F0                  00539 SendReady
00F0   3072           00540                 movlw   low Msg_Ready
00F1   00F0           00541                 movwf   ADDRL
00F2   3002           00542                 movlw   high Msg_Ready
00F3   00F1           00543                 movwf   ADDRH
00F4   20DB           00544                 call    SendMessage
00F5   3040           00545                 MOVLW   0X40
00F6   1E0C           00546                 btfss   PIR1,TXIF
00F7   28F6           00547                 goto    $-1
00F8   0099           00548                 movwf   TXREG
00F9   0008           00549                 return
                      00550 
00FA                  00551 Sendproctype
00FA   3077           00552                 movlw   low Msg_Proc
00FB   00F0           00553                 movwf   ADDRL
00FC   3002           00554                 movlw   high Msg_Proc
00FD   00F1           00555                 movwf   ADDRH
00FE   20DB           00556                 call    SendMessage
00FF   3040           00557                 MOVLW   0X40
0100   1E0C           00558                 btfss   PIR1,TXIF
0101   2900           00559                 goto    $-1
0102   0099           00560                 movwf   TXREG
0103   0008           00561                 return
                      00562 
0104                  00563 SendVersion
0104   307C           00564                 movlw   low Msg_Version
0105   00F0           00565                 movwf   ADDRL
0106   3002           00566                 movlw   high Msg_Version
0107   00F1           00567                 movwf   ADDRH
0108   20DB           00568                 call    SendMessage
0109   3040           00569                 MOVLW   0X40
010A   1E0C           00570                 btfss   PIR1,TXIF
010B   290A           00571                 goto    $-1
010C   0099           00572                 movwf   TXREG
010D   0008           00573                 return
                      00574 
                      00575 
010E   1E0C           00576 TransmitByte    btfss   PIR1,TXIF
010F   290E           00577                 goto    $-1
0110   0099           00578                 movwf   TXREG
0111   0008           00579                 return
                      00580 
                      00581 
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0112                  00582 EchoSerial                              ; echo back
0112   3010           00583                 movlw   SerialBuffer
0113   00F5           00584                 movwf   SerBuffPtr
0114   0875           00585 Echoloop1       movf    SerBuffPtr,W
0115   0084           00586                 movwf   FSR
0116   1783           00587                 bsf     STATUS,7        ;irp bit so access bank 2
0117   0800           00588                 movf    INDF,W
0118   00AE           00589                 movwf   A0
0119   3C0D           00590                 sublw   0x0d            ;msg terminted with 0x0d
011A   1903           00591                 btfsc   STATUS,Z
011B   0008           00592                 return
011C   082E           00593                 movf    A0,W
011D   1E0C           00594                 btfss   PIR1,TXIF
011E   291D           00595                 goto    $-1
011F   0099           00596                 movwf   TXREG
0120   0AF5           00597                 incf    SerBuffPtr,F
0121   2914           00598                 goto    Echoloop1
                      00599 
0122                  00600 ChkMsgValid
0122   3010           00601                 movlw   SerialBuffer
0123   00F5           00602                 movwf   SerBuffPtr
0124   3003           00603                 movlw   0x03
0125   00AF           00604                 movwf   A1              ;loop counter
0126   0875           00605 ChkMsgValid1    movf    SerBuffPtr,W
0127   0084           00606                 movwf   FSR
0128   1783           00607                 bsf     STATUS,7        ;irp bit so access bank 2
0129   0800           00608                 movf    INDF,W
012A   3C40           00609                 sublw   0x40            ;ascii @
012B   1D03           00610                 btfss   STATUS,Z
012C   0008           00611                 return                  ;wrong   z=0
012D   0AF5           00612                 incf    SerBuffPtr,F
012E   0BAF           00613                 decfsz  A1,F
012F   2926           00614                 goto    ChkMsgValid1
0130   1503           00615                 bsf     STATUS,Z
0131   0008           00616                 return                  ;OK z =1
                      00617 
0132                  00618 GetAddr
0132   1703           00619                 bsf     STATUS, RP1             ;bank2
0133   0815           00620                 movf    SerialBuffer+5,W
0134   1303           00621                 bcf     STATUS, RP1             ;bank0
0135   20B0           00622                 call    ConvertHexToNumber
0136   00AF           00623                 movwf   A1
0137   0EAF           00624                 swapf   A1,F
0138   1703           00625                 bsf     STATUS, RP1             ;bank2
0139   0816           00626                 movf    SerialBuffer+6,W
013A   1303           00627                 bcf     STATUS, RP1             ;bank0
013B   20B0           00628                 call    ConvertHexToNumber
013C   072F           00629                 addwf   A1,W
013D   00F1           00630                 movwf   ADDRH
                      00631 
013E   1703           00632                 bsf     STATUS, RP1             ;bank2
013F   0817           00633                 movf    SerialBuffer+7,W
0140   1303           00634                 bcf     STATUS, RP1             ;bank0
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0141   20B0           00635                 call    ConvertHexToNumber
0142   00AF           00636                 movwf   A1
0143   0EAF           00637                 swapf   A1,F
                      00638 
0144   1703           00639                 bsf     STATUS, RP1             ;bank2
0145   0818           00640                 movf    SerialBuffer+8,W
0146   1303           00641                 bcf     STATUS, RP1             ;bank0
0147   20B0           00642                 call    ConvertHexToNumber
0148   072F           00643                 addwf   A1,W
0149   00F0           00644                 movwf   ADDRL
014A   0008           00645                 return
                      00646 
014B   0875           00647 GetDataWord     movf    SerBuffPtr,W    ;SerBuffPtr setup on entry
014C   0084           00648                 movwf   FSR
014D   1783           00649                 bsf     STATUS,7        ;irp bit so access bank 2 where serbuffer is..
014E   0800           00650                 movf    INDF,W
014F   1303           00651                 bcf     STATUS, RP1             ;bank0
0150   20B0           00652                 call    ConvertHexToNumber
0151   00AF           00653                 movwf   A1
0152   0EAF           00654                 swapf   A1,F
0153   1703           00655                 bsf     STATUS, RP1             ;bank2
0154   0AF5           00656                 incf    SerBuffPtr,F
0155   0875           00657                 movf    SerBuffPtr,W
0156   0084           00658                 movwf   FSR
0157   0800           00659                 movf    INDF,W
0158   1303           00660                 bcf     STATUS, RP1             ;bank0
0159   20B0           00661                 call    ConvertHexToNumber
015A   072F           00662                 addwf   A1,W
015B   00F3           00663                 movwf   DATAH
015C   1703           00664                 bsf     STATUS, RP1             ;bank2
015D   0AF5           00665                 incf    SerBuffPtr,F
015E   0875           00666                 movf    SerBuffPtr,W    
015F   0084           00667                 movwf   FSR
0160   0800           00668                 movf    INDF,W
0161   1303           00669                 bcf     STATUS, RP1             ;bank0
0162   20B0           00670                 call    ConvertHexToNumber
0163   00AF           00671                 movwf   A1
0164   0EAF           00672                 swapf   A1,F
0165   1703           00673                 bsf     STATUS, RP1             ;bank2
0166   0AF5           00674                 incf    SerBuffPtr,F
0167   0875           00675                 movf    SerBuffPtr,W
0168   0084           00676                 movwf   FSR
0169   0800           00677                 movf    INDF,W
016A   1303           00678                 bcf     STATUS, RP1             ;bank0
016B   20B0           00679                 call    ConvertHexToNumber
016C   072F           00680                 addwf   A1,W
016D   00F2           00681                 movwf   DATAL
016E   0AF5           00682                 incf    SerBuffPtr,F
016F   1703           00683                 bsf     STATUS, RP1             ;bank2
0170   0008           00684                 return                  ;data word in DATAH/L
                      00685                 ;still in bank 2
                      00686                 
                      00687 
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0171                  00688 SendDataWord
0171   0873           00689                 movf    DATAH,W
0172   20B8           00690                 call    ConvertNumberToHex      ;result in A0/A1 (A0-hi)
0173   082E           00691                 movf    A0,W
0174   210E           00692                 call    TransmitByte
0175   082F           00693                 movf    A1,W
0176   210E           00694                 call    TransmitByte
0177   0872           00695                 movf    DATAL,W
0178   20B8           00696                 call    ConvertNumberToHex      ;result in A0/A1 (A10-hi)
0179   082E           00697                 movf    A0,W
017A   210E           00698                 call    TransmitByte
017B   082F           00699                 movf    A1,W
017C   210E           00700                 call    TransmitByte
017D   0008           00701                 return
                      00702 ;**********************************************************************
                      00703 ;main pogram follows here
                      00704 
                      00705 
017E                  00706 test1           
017E   309B           00707                 movlw   low Msg_User
017F   00F0           00708                 movwf   ADDRL
0180   3002           00709                 movlw   high Msg_User
0181   00F1           00710                 movwf   ADDRH
0182   20DB           00711                 call    SendMessage
0183   299B           00712                 goto    msgend
                      00713 
0184                  00714 main    
                      00715                 ;GOTO   Jon_Cowley_recieve
                      00716 
                      00717 ;going to read RA2 .. if hi go into pgm mode.. if not try to run user pgm at 0x500
                      00718 
                      00719 
0184   1905           00720 main2           btfsc   PORTA,2
0185   2994           00721                 goto    main1
                      00722 ;going to check to see that there is something at 0x500... memory is 3FFF when blank
0186   3005           00723                 movlw   0x05
0187   00F1           00724                 movwf   ADDRH
0188   3000           00725                 movlw   0x00
0189   00F1           00726                 movwf   ADDRH
018A   2062           00727                 call    ReadProgramMemory       ;Data in DATAL/H
018B   0873           00728                 movf    DATAH,W
018C   3C3F           00729                 sublw   0x3F
018D   1903           00730                 btfsc   STATUS,2
018E   2994           00731                 goto    main1
018F   0872           00732                 movf    DATAL,W
0190   3CFF           00733                 sublw   0xFF
0191   1903           00734                 btfsc   STATUS,2
0192   2994           00735                 goto    main1
0193   2D00           00736                 goto    0x500
                      00737 
0194                  00738 main1
0194   20F0           00739                 call    SendReady
0195                  00740 loop1
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0195   20A6           00741                 call    delay_checkSerial
0196   3008           00742                 movlw   0x08
0197   0685           00743                 xorwf   PORTA,F         ;flash led
0198   18F6           00744                 btfsc   SerFlags,1
0199   29A0           00745                 goto    msgReceived
019A   2995           00746                 goto    loop1
                      00747 
                      00748 
                      00749 ;;;
                      00750 
                      00751 
019B   3010           00752 msgend          movlw   SerialBuffer    ;reset buffer
019C   00F5           00753                 movwf   SerBuffPtr
019D   01F6           00754                 clrf    SerFlags
019E   170B           00755                 bsf     INTCON,PEIE     ;enable int
019F   2995           00756                 goto    loop1
                      00757 
01A0                  00758 msgReceived     
                      00759                         ;we have a message              
01A0   130B           00760 msg22           bcf     INTCON,PEIE     ;disable int
                      00761 
01A1   2122           00762                 call    ChkMsgValid     ;check valid (starts with @@@@)
01A2   1D03           00763                 btfss   STATUS,Z
01A3   299B           00764                 goto    msgend
                      00765 
                      00766 
01A4   1703           00767                 bsf     STATUS, RP1             ;bank2
01A5   0814           00768                 movf    SerialBuffer+4,W        ;this is cmd
01A6   1303           00769                 bcf     STATUS, RP1             ;bank0
01A7   00AE           00770                 movwf   A0
01A8   3C52           00771                 sublw   0x52                    ; R
01A9   1903           00772                 btfsc   STATUS,Z
01AA   29EC           00773                 goto    cmd_R
                      00774                 
01AB   082E           00775                 movf    A0,W
01AC   3C72           00776                 sublw   0x72                    ; r
01AD   1903           00777                 btfsc   STATUS,Z
01AE   29F0           00778                 goto    cmd_r
                      00779 
01AF   082E           00780                 movf    A0,W
01B0   3C57           00781                 sublw   0x57                    ; W
01B1   1903           00782                 btfsc   STATUS,Z
01B2   29FC           00783                 goto    cmd_W
                      00784 
                      00785 
01B3   082E           00786                 movf    A0,W
01B4   3C77           00787                 sublw   0x77                    ; w  4 words..
01B5   1903           00788                 btfsc   STATUS,Z
01B6   2A02           00789                 goto    cmd_w
                      00790 
01B7   082E           00791                 movf    A0,W
01B8   3C4A           00792                 sublw   0x4A                    ; J
01B9   1903           00793                 btfsc   STATUS,Z
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01BA   2A14           00794                 goto    cmd_J
                      00795 
                      00796 
01BB   082E           00797                 movf    A0,W
01BC   3C5A           00798                 sublw   0x5A                    ; Z
01BD   1903           00799                 btfsc   STATUS,Z
01BE   2A35           00800                 goto    cmd_Z
                      00801 
01BF   082E           00802                 movf    A0,W
01C0   3C43           00803                 sublw   0x43                    ; C
01C1   1903           00804                 btfsc   STATUS,Z
01C2   2A6A           00805                 goto    cmd_C
                      00806 
01C3   082E           00807                 movf    A0,W
01C4   3C58           00808                 sublw   0x58                    ; X (return PIC type)
01C5   1903           00809                 btfsc   STATUS,Z
01C6   2A10           00810                 goto    cmd_X
                      00811 
01C7   082E           00812                 movf    A0,W
01C8   3C56           00813                 sublw   0x56                    ; V (return firmware version)
01C9   1903           00814                 btfsc   STATUS,Z
01CA   2A12           00815                 goto    cmd_V
                      00816 
01CB   082E           00817                 movf    A0,W
01CC   3C55           00818                 sublw   0x55                    ; U - reset processor...
01CD   1903           00819                 btfsc   STATUS,Z
01CE   2A6F           00820                 goto    cmd_U
                      00821 
                      00822 
01CF   082E           00823                 movf    A0,W
01D0   3C45           00824                 sublw   0x45                    ;E - Eprom commands
01D1   1903           00825                 btfsc   STATUS,Z                ; command is E00aaC00dd where aa is address
01D2   29D7           00826                 goto    cmd_E                   ;C is R(read) or W(write and dd is data
                      00827 
                      00828 
01D3   299B           00829                 goto    msgend
                      00830 
                      00831 
01D4   3040           00832 cmd_end         movlw   0x40
01D5   210E           00833                 call    TransmitByte            ;to show done....
01D6   299B           00834                 goto    msgend
                      00835 
01D7                  00836 cmd_E           ;this reads//writes the EEPROM memory
01D7   2132           00837                 call    GetAddr
01D8   1703           00838                 bsf     STATUS, RP1             ;bank2
01D9   0819           00839                 movf    SerialBuffer+9,W        ;this is cmd either W or R
01DA   1303           00840                 bcf     STATUS, RP1             ;bank0
01DB   1303           00841                 bcf     STATUS, RP1             ;bank0
01DC   1283           00842                 bcf     STATUS, RP0
01DD   3C52           00843                 sublw   0x52                    ; R
01DE   1903           00844                 btfsc   STATUS,Z
01DF   29E5           00845                 goto    cmd_ER
                      00846 ;it is write
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01E0   301A           00847                 movlw   SerialBuffer+0x0a               ;buffer points to data
01E1   00F5           00848                 movwf   SerBuffPtr
01E2   214B           00849                 call    GetDataWord
                      00850 
                      00851         ;       bcf     STATUS, RP1             ;bank0
                      00852         ;       bcf     STATUS, RP0
                      00853         ;       movlw   0x33
                      00854                 ;;;movwf        DATAL
                      00855 
                      00856 
01E3   208B           00857                 call    writeEEProm
01E4   29D4           00858                 goto    cmd_end
                      00859 
01E5   206E           00860 cmd_ER          call    ReadEEProm
01E6   20B8           00861                 call    ConvertNumberToHex
01E7   082E           00862                 movf    A0,W
01E8   210E           00863                 call    TransmitByte
01E9   082F           00864                 movf    A1,W
01EA   210E           00865                 call    TransmitByte
01EB   29D4           00866                 goto    cmd_end
                      00867 
01EC                  00868 cmd_R           ;this reads one byte from the address given...
                      00869 
01EC   2132           00870                 call    GetAddr                 ;address in ADDRL/H
01ED   2062           00871                 call    ReadProgramMemory       ;Data in DATAL/H
01EE   2171           00872                 call    SendDataWord
01EF   29D4           00873                 goto    cmd_end
                      00874 
01F0   2132           00875 cmd_r           call    GetAddr                 ;address in ADDRL/H
01F1   3010           00876                 movlw   0x10                    ;16 bytes 
01F2   00A2           00877                 movwf   R2
01F3   2062           00878 cmd_r1          call    ReadProgramMemory       ;Data in DATAL/H
01F4   2171           00879                 call    SendDataWord
01F5   0AF0           00880                 incf    ADDRL,F
01F6   0870           00881                 movf    ADDRL,W
01F7   1903           00882                 btfsc   STATUS,Z
01F8   0AF1           00883                 incf    ADDRH,F
01F9   0BA2           00884                 decfsz  R2,F
01FA   29F3           00885                 goto    cmd_r1
01FB   29D4           00886                 goto    cmd_end
                      00887 
01FC   2132           00888 cmd_W           call    GetAddr                 ;address in ADDRL/H
01FD   3019           00889                 movlw   SerialBuffer+9          ;buffer points to data
01FE   00F5           00890                 movwf   SerBuffPtr
01FF   214B           00891                 call    GetDataWord
0200   2075           00892                 call    WriteProgramMemory
0201   29D4           00893                 goto    cmd_end
                      00894 
                      00895 
                      00896         
                      00897 
                      00898 ;write 4 bytes...
0202   2132           00899 cmd_w           call    GetAddr                 ;address in ADDRL/H
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0203   3004           00900                 movlw   0x04                    ;4 bytes 
0204   00A2           00901                 movwf   R2      
                      00902 
                      00903 #ifdef  Use16F876
0205   3019           00904                 movlw   SerialBuffer+9          ;buffer points to data                          ;call wr
                            ite word 4 times
0206   00F5           00905                 movwf   SerBuffPtr
0207   214B           00906 cmd_w1          call    GetDataWord
0208   2075           00907                 call    WriteProgramMemory
0209   0AF0           00908                 incf    ADDRL,F
020A   0870           00909                 movf    ADDRL,W
020B   1903           00910                 btfsc   STATUS,Z
020C   0AF1           00911                 incf    ADDRH,F
020D   0BA2           00912                 decfsz  R2,F
020E   2A07           00913                 goto    cmd_w1
Warning[205]: Found directive in column 1. (endif)
                      00914 endif
                      00915 
                      00916 #ifdef  Use16F876A      ;use the skanky write 4 words...
                      00917 
                      00918                 movlw   SerialBuffer+9          ;buffer points to data
                      00919                 movwf   SerBuffPtr
                      00920                 call    GetDataWord     ;data word in DATAH/L
                      00921                 movf    DATAL,W
                      00922                 movwf   DATAbuffer
                      00923                 movf    DATAH,W
                      00924                 movwf   DATAbuffer+1
                      00925 
                      00926                 call    GetDataWord     ;data word in DATAH/L
                      00927                 movf    DATAL,W
                      00928                 movwf   DATAbuffer+2
                      00929                 movf    DATAH,W
                      00930                 movwf   DATAbuffer+3
                      00931 
                      00932 
                      00933                 call    GetDataWord     ;data word in DATAH/L
                      00934                 movf    DATAL,W
                      00935                 movwf   DATAbuffer+4
                      00936                 movf    DATAH,W
                      00937                 movwf   DATAbuffer+5
                      00938 
                      00939 
                      00940                 call    GetDataWord     ;data word in DATAH/L
                      00941                 movf    DATAL,W
                      00942                 movwf   DATAbuffer+6
                      00943                 movf    DATAH,W
                      00944                 movwf   DATAbuffer+7
                      00945 
                      00946                 call    WriteProgramMemory4
                      00947 endif
                      00948 
                      00949 #ifdef  Use16F886               ;use the skanky write 16 Words...
                      00950                 BANKSEL PORTA                   ;bank0
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00951                 movlw   SerialBuffer+9          ;buffer points to data
                      00952                 movwf   SerBuffPtr
                      00953                 call    WriteProgramMemory8
                      00954 endif
020F   29D4           00955                 goto    cmd_end
                      00956 
0210                  00957 cmd
                      00958 
0210                  00959 cmd_X
0210   20FA           00960                 call    Sendproctype
0211   29D4           00961                 goto    cmd_end
                      00962 
0212                  00963 cmd_V
0212   2104           00964                 call    SendVersion
0213   29D4           00965                 goto    cmd_end
                      00966 
                      00967 
                      00968 
                      00969 
0214                  00970 cmd_J           
0214   3010           00971                 movlw   SerialBuffer            ;reset buffer
0215   00F5           00972                 movwf   SerBuffPtr
0216   01F6           00973                 clrf    SerFlags
0217   3040           00974                 movlw   0x40
0218   210E           00975                 call    TransmitByte            ;to show done....
0219   170B           00976                 bsf     INTCON,PEIE             ;enable int
                      00977 
021A   2D00           00978                 goto    0x500                   ; jump for code for FlowDaigrams...
                      00979 
                      00980 
                      00981 ;CODE BELOW DOES PROPER JUMP TO GIVEN ADDRESS.... onli works with 16F876 at present..
021B   2132           00982                 call    GetAddr                 ;address in ADDRL/H
021C   0870           00983                 movf    ADDRL,W
021D   00F2           00984                 movwf   DATAL
021E   0871           00985                 movf    ADDRH,W
021F   00F3           00986                 movwf   DATAH
0220   16F3           00987                 bsf     DATAH,5
0221   1273           00988                 bcf     DATAH,4
0222   15F3           00989                 bsf     DATAH,3                 ;goto is 10 1xxx xxxx xxxx
                      00990 
                      00991 ;need to set bitw3/4 of PCLATH
0223   120A           00992                 bcf     PCLATH,4
0224   118A           00993                 bcf     PCLATH,3
0225   19F1           00994                 btfsc   ADDRH,3
0226   158A           00995                 bsf     PCLATH,3
0227   1A71           00996                 btfsc   ADDRH,4
0228   160A           00997                 bsf     PCLATH,4
0229   3034           00998                 movlw   low cmd_J1
022A   00F0           00999                 movwf   ADDRL
022B   3002           01000                 movlw   high cmd_J1
022C   00F1           01001                 movwf   ADDRH
022D   2075           01002                 call    WriteProgramMemory      ;writes goto instruction
022E   3010           01003                 movlw   SerialBuffer            ;reset buffer
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

022F   00F5           01004                 movwf   SerBuffPtr
0230   01F6           01005                 clrf    SerFlags
0231   3040           01006                 movlw   0x40
0232   210E           01007                 call    TransmitByte            ;to show done....
0233   170B           01008                 bsf     INTCON,PEIE             ;enable int
0234   2800           01009 cmd_J1          goto    0000
                      01010 
0235   20F0           01011 cmd_Z           call    SendReady               ;to check ready
0236   29D4           01012                 goto    cmd_end
                      01013         
                      01014 
0237                  01015 break_point     ;the return address to continue is on top of stack
                      01016                 ;W will contain the break number
                      01017                 ; we just need to send a message saying we have reached break..
                      01018                 ;will send OCR working regs, and Z flag as well?
                      01019                 ;send W
0237   00B4           01020                 movwf   w_Btemp         ; save off current W register contents
0238   0803           01021                 movf    STATUS,w        ; move status register into W register
0239   00B5           01022                 movwf   status_Btemp    ; save off contents of STATUS register
                      01023 
023A   20B8           01024                 call    ConvertNumberToHex      ;send Status
023B   082E           01025                 movf    A0,W
023C   210E           01026                 call    TransmitByte
023D   082F           01027                 movf    A1,W
023E   210E           01028                 call    TransmitByte
                      01029 
023F   0834           01030                 movf    w_Btemp,W               ;send W ( which has break number...)
0240   20B8           01031                 call    ConvertNumberToHex
0241   082E           01032                 movf    A0,W
0242   210E           01033                 call    TransmitByte
0243   082F           01034                 movf    A1,W
0244   210E           01035                 call    TransmitByte
                      01036 
0245   3020           01037                 movlw   0x20                    ;sends working regs
0246   0084           01038                 movwf   FSR
0247   1383           01039                 bcf     STATUS,7                ;irp bit so access bank 0
0248   3008           01040                 movlw   0x08
0249   00AC           01041                 movwf   temp1
024A   0800           01042 cmd_S1          movf    INDF,W
024B   20B8           01043                 call    ConvertNumberToHex
024C   082E           01044                 movf    A0,W
024D   210E           01045                 call    TransmitByte
024E   082F           01046                 movf    A1,W
024F   210E           01047                 call    TransmitByte
Message[305]: Using default destination of 1 (file).
0250   0A84           01048                 incf    FSR
Message[305]: Using default destination of 1 (file).
0251   0BAC           01049                 decfsz  temp1
0252   2A4A           01050                 goto    cmd_S1
                      01051 
                      01052                 ;send input port
                      01053 
0253   0807           01054                 movf    PORTC,W
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0254   393F           01055                 andlw   0x3F
0255   00AF           01056                 movwf   A1
                      01057 
0256   0805           01058                 movf    PORTA,W
0257   3930           01059                 andlw   0x30
0258   00AE           01060                 movwf   A0
0259   0DAE           01061                 rlf     A0,F
025A   0DAE           01062                 rlf     A0,F
025B   082E           01063                 movf    A0,W
025C   39C0           01064                 andlw   0xC0
025D   072F           01065                 addwf   A1,W
                      01066 
                      01067 
025E   20B8           01068                 call    ConvertNumberToHex
025F   082E           01069                 movf    A0,W
0260   210E           01070                 call    TransmitByte
0261   082F           01071                 movf    A1,W
0262   210E           01072                 call    TransmitByte
                      01073 
                      01074                 ;send output port
                      01075 
0263   0806           01076                 movf    PORTB,W
0264   20B8           01077                 call    ConvertNumberToHex
0265   082E           01078                 movf    A0,W
0266   210E           01079                 call    TransmitByte
0267   082F           01080                 movf    A1,W
0268   210E           01081                 call    TransmitByte
                      01082 
                      01083                 
0269   29D4           01084                 goto    cmd_end
                      01085 
                      01086 
026A                  01087 cmd_C           ;continue after break   address should be on stack!
                      01088 
                      01089 
026A   0835           01090                 movf    status_Btemp,w  ; retrieve copy of STATUS register
026B   0083           01091                 movwf   STATUS          ;restore pre-isr STATUS register contents
026C   0EB4           01092                 swapf   w_Btemp,f
026D   0E34           01093                 swapf   w_Btemp,w       ; restore pre-isr W register contents
026E   0008           01094                 return
                      01095 
026F                  01096 cmd_U
026F   3040           01097                 movlw   0x40
0270   210E           01098                 call    TransmitByte            ;to show done....               
0271   2800           01099                 goto    0000
                      01100 
                      01101 
                      01102 
                      01103         
                      01104 
0272   2965 30E4 3C80 01105 Msg_Ready       da  "Ready",0x0a0d,0x0000
       0A0D 0000 
Warning[205]: Found directive in column 1. (ifdef)
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01106 ifdef  Use16F876
0277   18B6 2338 1BB6 01107 Msg_Proc        da  "16F876",0x0a0d,0x0000
       0A0D 0000 
Warning[205]: Found directive in column 1. (endif)
                      01108 endif
Warning[205]: Found directive in column 1. (ifdef)
                      01109 ifdef  Use16F876A
                      01110 Msg_Proc        da  "16F876A",0x0a0d,0x0000
                      01111 endif
Warning[205]: Found directive in column 1. (ifdef)
                      01112 ifdef  Use16F886
                      01113 Msg_Proc        da  "16F886",0x0a0d,0x0000
                      01114 endif
                      01115 
                      01116 ;ver 1.2 has some bugs corrected and the hooks for 16F886 chipa
                      01117 ;ver 1.3 adds the code for simpe break option in Flow diagrams and basic printing support
                      01118 ;ver 1.4 correct the bug on PORT B for 16F886 chips and add the self-test code 
                      01119 ;ver 1.4  which requires input port coupled to output port.
                      01120 ;ver 1.5  minor corrections
                      01121 ;ver 2.1   swops input and output ports so inpuit on Port C and output onport B
                      01122 ;          also removed the self test stuff
                      01123 ;ver 2.2   correct jon_cowley stuff to use Port B for output...
                      01124 ;ver 2.3   add cmd E to read and write EEProm memory also added the psuedo OCR calls READDATAEEPROM, WRI
                            TEDATAEEPROM
                      01125 ;ver 2.4   speed up serial stuff by checking for serial msg in delay routine
                      01126 
027C   2B65 3973 34EF 01127 Msg_Version     da "Version 2.4",0x0a0d,0x0000
       3720 192E 1A00 
       0A0D 0000 
                      01128 
0284   2965 31E5 34F6 01129 Msg_Received    da  "Received",0x0d0a,0x0000
       32E4 0D0A 0000 
028A   2B61 3669 3220 01130 Msg_Valid       da  "Valid ",0x0d0a,0x0000
       0D0A 0000 
028F   21CD 2220 293A 01131 Msg_CMDR        da  "CMD R:   "0x0d0a,0x0000
       1020 1000 0D0A 
       0000 
0296   3765 3C74 1D20 01132 Msg_R           da  "next:   ",0x0d00
       1020 0D00 
029B   24EE 1075 39E5 01133 Msg_User        da  "In user Code!  ",0x0d00
       3920 21EF 3265 
       10A0 1000 0D00 
                      01134 
                      01135 
                      01136 ;jump table
0300                  01137         ORG     0x300
0300   284E           01138                 goto    WAIT1MS
0301   2832           01139                 goto    READADC
0302   283B           01140                 goto    READTABLE
0303   2A37           01141                 goto    break_point
0304   290E           01142                 goto    TransmitByte
0305   2B0F           01143                 goto    Jon_Cowley_recieve
0306   2B09           01144                 goto    Jon_Cowley_TRANSMIT
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0307   2853           01145                 goto    READDATAEEPROM
0308   2859           01146                 goto    WRITEDATAEEPROM
                      01147 
                      01148 
0309                  01149 Jon_Cowley_TRANSMIT
0309   2032           01150                 call    READADC
030A   0820           01151                 movf    R0,W
030B   210E           01152                 call    TransmitByte
030C   204E           01153                 call    WAIT1MS
030D   204E           01154                 call    WAIT1MS
030E   2B09           01155                 goto    Jon_Cowley_TRANSMIT
                      01156 
030F                  01157 Jon_Cowley_recieve
                      01158 
030F   3010           01159                 movlw   SerialBuffer
0310   00F5           01160                 movwf   SerBuffPtr
0311   0875           01161                 movf    SerBuffPtr,W
0312   0084           01162                 movwf   FSR
0313   1783           01163                 bsf     STATUS,7        ;irp bit so access bank 2
0314   0800           01164                 movf    INDF,W
                      01165 ;have the byte from serial
0315   1283 1303      01166                 BANKSEL PORTB
0317   0086           01167                 MOVWF   PORTB
0318   2B0F           01168                 goto    Jon_Cowley_recieve
                      01169                 
                      01170 
                      01171     END
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

A0                                0000002E
A1                                0000002F
A2                                00000030
A3                                00000031
A4                                00000032
A5                                00000033
ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADDRH                             00000071
ADDRL                             00000070
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

CHS2                              00000005
CKE                               00000006
CKP                               00000004
CREN                              00000004
CSRC                              00000007
ChkMsgValid                       00000122
ChkMsgValid1                      00000126
ConvertHexToNumber                000000B0
ConvertNumberToHex                000000B8
D                                 00000005
DATAH                             00000073
DATAL                             00000072
DATA_ADDRESS                      00000005
DC                                00000001
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
EchoSerial                        00000112
Echoloop1                         00000114
Exit_Int                          0000001A
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
GetAddr                           00000132
GetDataWord                       0000014B
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INTCON                            0000000B
INTCONX                           00000074
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
Jon_Cowley_TRANSMIT               00000309
Jon_Cowley_recieve                0000030F
Msg_CMDR                          0000028F
Msg_Proc                          00000277
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

Msg_R                             00000296
Msg_Ready                         00000272
Msg_Received                      00000284
Msg_User                          0000029B
Msg_Valid                         0000028A
Msg_Version                       0000027C
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
R                                 00000002
R0                                00000020
R1                                00000021
R2                                00000022
R3                                00000023
R4                                00000024
R5                                00000025
R6                                00000026
R7                                00000027
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

R8                                00000028
R9                                00000029
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READADC                           00000032
READDATAEEPROM                    00000053
READTABLE                         0000003B
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
ReadEEProm                        0000006E
ReadProgramMemory                 00000062
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
SendDataWord                      00000171
SendMessage                       000000DB
SendReady                         000000F0
SendVersion                       00000104
Sendproctype                      000000FA
SerBuffPtr                        00000075
SerFlags                          00000076
SerialBuffer                      00000010
SetBank0_return                   0000005F
SetUpMemAdd                       0000009F
SetupSerial                       000000CC
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
TransmitByte                      0000010E
UA                                00000001
Use16F876                         
W                                 00000000
WAIT1MS                           0000004E
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WRITEDATAEEPROM                   00000059
WriteProgramMemory                00000075
WriteProgramMemory4               0000009D
WriteProgramMemory8               0000009E
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F876                          00000001
__DEBUG                           1
break_point                       00000237
cmd                               00000210
cmd_C                             0000026A
cmd_E                             000001D7
cmd_ER                            000001E5
cmd_J                             00000214
cmd_J1                            00000234
cmd_R                             000001EC
cmd_S1                            0000024A
cmd_U                             0000026F
cmd_V                             00000212
cmd_W                             000001FC
MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

cmd_X                             00000210
cmd_Z                             00000235
cmd_end                           000001D4
cmd_r                             000001F0
cmd_r1                            000001F3
cmd_w                             00000202
cmd_w1                            00000207
delay0                            000000A8
delay1                            000000A9
delay_checkSerial                 000000A6
loop1                             00000195
main                              00000184
main1                             00000194
main2                             00000184
msg22                             000001A0
msgReceived                       000001A0
msgend                            0000019B
next_free                         00000036
setup                             0000001F
status_Btemp                      00000035
status_temp                       0000002B
temp1                             0000002C
temp2                             0000002D
test1                             0000017E
w_Btemp                           00000034
w_temp                            0000002A
writeEEProm                       0000008B


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXX-XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXX------------ ----------------
0300 : XXXXXXXXXXXXXXXX XXXXXXXXX------- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   700
Program Memory Words Free:  7492


MPASM  5.49                    SERIALTEST.ASM   3-5-2015  22:58:24         PAGE 33





Errors   :     0
Warnings :     8 reported,     0 suppressed
Messages :    40 reported,     0 suppressed

